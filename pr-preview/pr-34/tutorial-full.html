<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FunkyHeatmap.js Customizing the heatmap</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="styles/tomorrow-night.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="static/main.css">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
    <script src='static/main.js'></script>
  
</head>


<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
             
                <a class="image" href="index.html">
                    <img src="https://raw.githubusercontent.com/funkyheatmap/logo/refs/heads/main/src/funkyheatmap_edited.svg" alt="logo">
                </a>
            
             
                <a href="index.html">
                    <h1 class="navbar-item">FunkyHeatmap.js</h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                <div class="dropdown is-hoverable is-right">
                    <a class="dropdown-trigger link">
                        Tutorials
                        <i class="fas fa-chevron-down fa-xs"></i>
                    </a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                        
                            <a class="dropdown-item" href="tutorial-simple.html">
                                Basic usage
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-full.html">
                                Customizing the heatmap
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-scIB.html">
                                Reproducing scIB figure
                            </a>
                        
                        </div>
                    </div>
                </div>
                
                 
                    
                        <a
                            class="link user-link "
                            href="https://github.com/funkyheatmap/funkyheatmapjs"
                        >
                            Github
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://github.com/funkyheatmap/funkyheatmapjs/blob/main/CHANGELOG.md"
                        >
                            Changelog
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://www.npmjs.com/package/funkyheatmapjs"
                        >
                            NPM package
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://funkyheatmap.github.io/funkyheatmap"
                        >
                            R version
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://funkyheatmap.github.io/funkyheatmappy"
                        >
                            Python version
                        </a>
                    
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar tutorials"
            id="sidebarNav"
        >
            
                <div class="search-wrapper">
                    <input id="search" type="text" placeholder="Search docs..." class="input">
                </div>
            
            <nav>
                
                    <div class="category"><h3>Tutorials</h3><ul><li><a href="tutorial-simple.html">Basic usage</a></li><li><a href="tutorial-full.html">Customizing the heatmap</a></li><li><a href="tutorial-scIB.html">Reproducing scIB figure</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                
                    <header class="page-title">
                        <p>Tutorial</p>
                        <h1>Customizing the heatmap</h1>
                    </header>
                
                <section>

<article>
    <!DOCTYPE html><html lang="en"><head><script type="module" src="scIB.8f0250bc.js"></script><title>Full funkyheatmap example</title><meta name="viewport" content="width=device-width, initial-scale=1"><style>.tutorial-body{-webkit-text-size-adjust:100%;margin:0;padding:10px 50px 50px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Ubuntu,Helvetica Neue,Helvetica,sans-serif;line-height:1.2}.hidden{display:none}</style></head><body class="tutorial-body"> <div class="hidden tutorial-content"> <p>Let's continue our tutorial with the <code>mtcars</code> <a href="https://gist.github.com/seankross/a412dfbd88b3db70b74b">example dataset</a>, but adding 2 new columns to showcase <em class="pname">funkyheatmapjs</em>, and customizing the display.</p> <h3>Load scripts</h3> <p>First, include in your html page the 2 peer dependencies and <em class="pname">funkyheatmapjs</em> itself:</p> <pre class="lang-html prettyprint source"><code>&lt;script type=&quot;text/javascript&quot; src=&quot;https://unpkg.com/d3@7&quot;>&lt;/script>
&lt;script type=&quot;text/javascript&quot; src=&quot;https://unpkg.com/lodash@4/lodash.min.js&quot;>&lt;/script>
&lt;script type=&quot;module&quot; src=&quot;https://unpkg.com/funkyheatmapjs&quot;>&lt;/script></code></pre> <h3>Load and render data</h3> <p>Then, load the data and add custom columns:</p> <pre class="lang-javascript prettyprint source">
d3.csv('mtcars.csv').then((data) => {
    data = d3.sort(data, (a, b) => d3.ascending(+b.mpg, +a.mpg));
    data = data.slice(0, 20);
    data.forEach((d, i) => {
        d.schema = i % 2 ? "electric.png" : "ice.png";
        d.engine_type = i % 2 ? 'Electric' : 'Gas';
        d.engine_type += ` (${d.hp}üê¥)`;
        d.load = [(i % 3) / 6, ((i + 1) % 3) / 6, 0];
        d.load[2] = 1 - d.load[0] - d.load[1];
    });
});</pre> <p>Here, the <code>schema</code> column refers to images with their absolute or relative (in this case) URIs. The <code>load</code> column has array as data, of equal sizes for each datapoint. And the <code>engine_type</code> column defines a custom text for the tooltip.</p> <h3>Adding configuration</h3> <p>Configuration of <em class="pname">funkyheatmapjs</em> is done via parameters to <a href="global.html#funkyheatmap">funkyheatmap</a> call. In this example we will use all available parameters: <code>column_info</code>, <code>column_groups</code>, <code>row_info</code>, <code>row_groups</code>, <code>palettes</code> and <code>legends</code>.</p> <pre class="lang-javascript prettyprint source">const column_info = [
    {id: "model", group: null, name: "Name", geom: "text", palette: null},
    {id: "mpg", group: "overall_1", name: "Miles / gallon", geom: "bar", palette: "palette1", options: {width: 4}},
    {id: "cyl", group: "overall_2", name: "Number of cylinders", geom: "bar", palette: "palette2", options: {width: 4}},
    {id: "disp", group: "group1", name: "Displacement (cu.in.)", geom: "funkyrect", palette: "palette1"},
    {id: "hp", group: "group1", name: "Gross horsepower", geom: "funkyrect", palette: "palette1"},
    {id: "drat", group: "group1", name: "Rear axle ratio", geom: "funkyrect", palette: "palette1"},
    {id: "wt", group: "group1", name: "Weight (1000 lbs)", geom: "funkyrect", palette: "palette1"},
    {id: "qsec", group: "group2", name: "1/4 mile time", geom: "circle", palette: "palette2"},
    {id: "vs", group: "group2", name: "Engine", geom: "circle", palette: "palette2"},
    {id: "am", group: "group2", name: "Transmission", geom: "circle", palette: "palette2"},
    {id: "gear", group: "group2", name: "# Forward gears", geom: "circle", palette: "palette2"},
    {id: "carb", group: "group2", name: "# Carburetors", geom: "circle", palette: "palette2"},
    {id: "schema", group: "group2", name: "Schema", geom: "image", width: 25, id_hover_text: "engine_type"},
    {id: "load", group: "group2", name: "Load", geom: "pie", palette: "load"}
];</pre> <p><b><code>column_info</code></b> tells <em class="pname">funkyheatmapjs</em> which columns to display (all by default) and how. <code>id</code> refers to the column name in the data, and <code>name</code> is the label for the column. <code>geom</code> is the type of visualization for the column. Compared to the <a href="tutorial-simple.html">Basic usage</a> example, we changed some numerical columns to be displayed as bars or circles, and added columns for images and pie charts.</p> <p>Image column requires a <code>width</code> option, in pixels. For the <code>bar</code> columns the width is in standard column widths, here <code>4</code> means one bar columns is as wide as 4 standard columns.</p> <p>We can also specify <code>palette</code> to configure color scheme for the column, and group them thematically under a header with <code>group</code> option.</p> <p>Finally, <code>id_hover_text</code> configures this column to display a tooltip text from another column when move hovers the display element.</p> <pre class="lang-javascript prettyprint source">const column_groups = [
    {level1: "Overall", level2: "Left", group: "overall_1", palette: "none"},
    {level1: "Overall", level2: "Right", group: "overall_2", palette: "none"},
    {level1: "Group 1", group: "group1", palette: "palette1"},
    {level1: "Group 2", group: "group2", palette: "palette2"}
];</pre> <p><b><code>column_groups</code></b> is used to configure the display of column group headers, if they are used in <code>column_info</code>. Value of <code>group</code> should match between this parameter and <code>column_info</code>. The display name is specified in <code>levelX</code> properties, the default is the capitalized group ID. More than one level allows nesting the column groups.</p> <pre class="lang-javascript prettyprint source">const row_groups = [
    {group: 'first', Group: 'First'},
    {group: 'second', Group: 'Seconds'}
];</pre> <p><b><code>row_groups</code></b> is used to configure the names of the row groups: these are displayed above each group, and split the dataframe into blocks. When sorting by column, each row group is sorted independently.</p> <pre class="lang-javascript prettyprint source">const row_info = data.map((_, i) => {
    return {group: i < 10 && 'first' || 'second'}
});</pre> <p><b><code>row_info</code></b> tells <em class="pname">funkyheatmapjs</em> which rows belong to which group. It is expected that rows are already sorted by groups, such that all rows from the same group are adjacent. Here we just put the first 10 rows into one group, and the last into another as an example.</p> <pre class="lang-javascript prettyprint source">const palettes = {
    overall: "Greys",
    palette1: "Blues",
    palette2: "Reds",
    load: {
        colors: ["#82daf2", "#ba4e79", "#ffffff"],
        names: ['A', 'B', 'C']
    }
};</pre> <p><b><code>palettes</code></b> map our arbitrary names for color schemes to predefined palettes (see <a href="module-palettes.html#~defaultPalettes">defaultPalettes</a>) or custom palettes. Custom palettes could be simple arrays, or named colors. We need named colors for <code>pie</code> chart geom.</p> <pre class="lang-javascript prettyprint source">const legends = [
    {
        title: "Type",
        geom: "image",
        size: 25,
        labels: ['Electric', 'Gas'],
        values: ['electric.png', 'ice.png']
    },
    {
        title: "Oranges",
        palette: "palette2",
        geom: "circle"
    }
];</pre> <p><b><code>legends</code></b> is used to customize legend display. Legends will display once for each palette used in the columns. Here we redefine the legend for <code>palette2</code> palette, but keep the default for <code>palette1</code>. We also add a legend for our <code>image</code> column.</p> <p>Finally, we call the <a href="global.html#funkyheatmap">funkyheatmap</a> function with all the parameters:</p> <pre class="lang-html prettyprint source"><code>&lt;div id=&quot;app&quot;>&lt;/div>

&lt;script type=&quot;module&quot;>
import { default as funkyheatmap } from 'https://unpkg.com/funkyheatmapjs';
d3.csv('mtcars.csv').then((data) => {
    data = d3.sort(data, (a, b) => d3.ascending(+b.mpg, +a.mpg));
    data = data.slice(0, 20);
    data.forEach((d, i) => {
        d.schema = i % 2 ? "electric.png" : "ice.png";
        d.engine_type = i % 2 ? 'Electric' : 'Gas';
        d.engine_type += ` (${d.hp}üê¥)`;
        d.load = [(i % 3) / 6, ((i + 1) % 3) / 6, 0];
        d.load[2] = 1 - d.load[0] - d.load[1];
    });
    const row_info = data.map((_, i) => {
        return {group: i < 10 && 'first' || 'second'}
    });
    d3.select("#app").node().appendChild(funkyheatmap(
        data,
        column_info,
        row_info,
        column_groups,
        row_groups,
        palettes,
        legends,
        {rowHeight: 28}, // position arguments
        { // heatmap options
            labelGroupsAbc: true,
            colorByRank: true
        }
    ));
});
&lt;/script></code></pre> <p>Here we also used <a href="PositionArgs.html">PositionArgs</a> options and <a href="global.html#HeatmapOptions">HeatmapOptions</a> options, which allow additional configuration of sizes and positions, and of behavior and theme options.</p> <h3>Result</h3> </div> <div id="app"></div> <script src="https://unpkg.com/d3@7.8.2/dist/d3.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script> <script type="module" src="full.d81c6b5d.js"></script> <p>You can see a realistic usage example in the <a href="tutorial-scIB.html">next tutorial</a>.</p> </body></html>
</article>

</section>

            </div>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

<script src="scripts/search.js"> </script>


</body>
</html>