

<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FunkyHeatmap.js palettes.js</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="styles/tomorrow-night.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="static/main.css">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
    <script src='static/main.js'></script>
  
</head>


<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
             
                <a class="image" href="index.html">
                    <img src="https://raw.githubusercontent.com/funkyheatmap/logo/refs/heads/main/src/funkyheatmap_edited.svg" alt="logo">
                </a>
            
             
                <a href="index.html">
                    <h1 class="navbar-item">FunkyHeatmap.js</h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                <div class="dropdown is-hoverable is-right">
                    <a class="dropdown-trigger link">
                        Tutorials
                        <i class="fas fa-chevron-down fa-xs"></i>
                    </a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                        
                            <a class="dropdown-item" href="tutorial-simple.html">
                                Basic usage
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-full.html">
                                Customizing the heatmap
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-scIB.html">
                                Reproducing scIB figure
                            </a>
                        
                        </div>
                    </div>
                </div>
                
                 
                    
                        <a
                            class="link user-link "
                            href="https://github.com/funkyheatmap/funkyheatmapjs"
                        >
                            Github
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://github.com/funkyheatmap/funkyheatmapjs/blob/main/CHANGELOG.md"
                        >
                            Changelog
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://www.npmjs.com/package/funkyheatmapjs"
                        >
                            NPM package
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://funkyheatmap.github.io/funkyheatmap"
                        >
                            R version
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://funkyheatmap.github.io/funkyheatmappy"
                        >
                            Python version
                        </a>
                    
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
                <div class="search-wrapper">
                    <input id="search" type="text" placeholder="Search docs..." class="input">
                </div>
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"><h3>Modules</h3><ul><li><a href="module-columns.html">columns</a></li><li><a href="module-geoms.html">geoms</a></li><li><a href="module-input_util.html">input_util</a></li><li><a href="module-legends.html">legends</a></li><li><a href="module-palettes.html">palettes</a></li></ul><h3>Classes</h3><ul><li><a href="FunkyHeatmap.html">FunkyHeatmap</a></li><li><a href="PositionArgs.html">PositionArgs</a></li><li><a href="module-columns.Column.html">Column</a></li></ul><h3>Global</h3><ul><li><a href="global.html#funkyheatmap">funkyheatmap</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                
                    <header class="page-title">
                        <p>Source</p>
                        <h1>palettes.js</h1>
                    </header>
                
                



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module */

import * as d3 from 'd3';

/**
 * @typedef {Object} CustomPalette
 * @property {string[]} colors - list of colors
 * @property {string[]} names - list of names for the colors, in the same order
 * @description A custom palette specification. This is important for categorical data: the names
 *   are used as labels in the legend for `pie` geom, for `text` geom the values are mapped to
 *   colors based on the names.
 */

/**
 * @typedef {string|string[]|module:palettes~CustomPalette} Palette
 * @description A palette specification.
 */

/**
 * @typedef {Object.&lt;string, module:palettes~Palette>} PaletteMapping
 * @description Mapping of names to palette colors. For palette colors the possible options are:
 *   - name of a built-in palette (e.g. `Blues`, `Set1`, etc.). See
 *   {@link module:palettes~defaultPalettes|defaultPalettes}
 *   - `Array.&lt;string>` of custom colors as strings
 *   - {@link module:palettes~CustomPalette|CustomPalette} array of named colors, important for
 *   categorical data
 */

/**
 * Default palettes for numerical and categorical data.
 * @constant {Object}
 * @property {Object} numerical - palettes for numerical data
 * @property {string[]} numerical.Blues - &lt;div class="inline-pal-preview" style="background: #011636">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #08306B">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #08519C">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #2171B5">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #4292C6">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #6BAED6">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #9ECAE1">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #C6DBEF">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #DEEBF7">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #F7FBFF">&lt;/div>&amp;nbsp;. Default for
 *   numerical data
 * @property {string[]} numerical.Greens - &lt;div class="inline-pal-preview" style="background: #00250f">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #00441B">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #006D2C">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #238B45">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #41AB5D">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #74C476">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #A1D99B">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #C7E9C0">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #E5F5E0">&lt;/div>
 * @property {string[]} numerical.Greys - &lt;div class="inline-pal-preview" style="background: #000000">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #252525">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #525252">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #737373">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #969696">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #BDBDBD">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #D9D9D9">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #F0F0F0">&lt;/div>
 * @property {string[]} numerical.Reds - &lt;div class="inline-pal-preview" style="background: #CB181D">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #EF3B2C">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FB6A4A">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FC9272">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FCBBA1">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FEE0D2">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FFF5F0">&lt;/div>
 * @property {string[]} numerical.YlOrBr - &lt;div class="inline-pal-preview" style="background: #EC7014">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FE9929">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FEC44F">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FEE391">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FFF7BC">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FFFFE5">&lt;/div>
 * @property {Object} categorical - palettes for categorical data
 * @property {string[]} categorical.Set1 - &lt;div class="inline-pal-preview" style="background: #E41A1C">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #377EB8">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #4DAF4A">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #984EA3">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FF7F00">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FFFF33">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #A65628">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #F781BF">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #999999">&lt;/div>&amp;nbsp;. Default for
 *   categorical data
 * @property {string[]} categorical.Set2 - &lt;div class="inline-pal-preview" style="background: #66C2A5">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FC8D62">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #8DA0CB">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #E78AC3">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #A6D854">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FFD92F">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #E5C494">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #B3B3B3">&lt;/div>
 * @property {string[]} categorical.Set3 - &lt;div class="inline-pal-preview" style="background: #8DD3C7">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FFFFB3">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #BEBADA">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FB8072">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #80B1D3">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FDB462">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #B3DE69">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FCCDE5">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #D9D9D9">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #BC80BD">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #CCEBC5">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #FFED6F">&lt;/div>
 * @property {string[]} categorical.Dark2 - &lt;div class="inline-pal-preview" style="background: #1B9E77">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #D95F02">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #7570B3">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #E7298A">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #66A61E">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #E6AB02">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #A6761D">&lt;/div>
 *   &lt;div class="inline-pal-preview" style="background: #666666">&lt;/div>
 */
const defaultPalettes = {
    numerical: {
        Blues: [
            "#011636", "#08306B", "#08519C", "#2171B5", "#4292C6", "#6BAED6", "#9ECAE1", "#C6DBEF",
            "#DEEBF7", "#F7FBFF"
        ],
        Greens: [
            "#00250f", "#00441B", "#006D2C", "#238B45", "#41AB5D", "#74C476", "#A1D99B", "#C7E9C0",
            "#E5F5E0"
        ],
        Greys: [
            "#000000", "#252525", "#525252", "#737373", "#969696", "#BDBDBD", "#D9D9D9", "#F0F0F0"
        ],
        Reds: [
            "#CB181D", "#EF3B2C", "#FB6A4A", "#FC9272", "#FCBBA1", "#FEE0D2", "#FFF5F0"
        ],
        YlOrBr: [
            "#EC7014", "#FE9929", "#FEC44F", "#FEE391", "#FFF7BC", "#FFFFE5"
        ]
    },
    categorical: {
        Set1: [
            "#E41A1C","#377EB8","#4DAF4A","#984EA3","#FF7F00","#FFFF33","#A65628","#F781BF",
            "#999999"
        ],
        Set2: [
            "#66C2A5","#FC8D62","#8DA0CB","#E78AC3","#A6D854","#FFD92F","#E5C494","#B3B3B3"
        ],
        Set3: [
            "#8DD3C7", "#FFFFB3", "#BEBADA", "#FB8072", "#80B1D3", "#FDB462", "#B3DE69", "#FCCDE5",
            "#D9D9D9", "#BC80BD", "#CCEBC5", "#FFED6F"
        ],
        Dark2: [
            "#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"
        ]
    }
};

/**
 *
 * @param {module:columns.Column[]} columns - array of `Column` objects with information
 * @param {module:palettes~PaletteMapping} palettes - mapping of names to color palettes
 */
export function assignPalettes(columns, palettes) {
    palettes = { numerical: "Blues", categorical: "Set1", ...palettes };
    columns.forEach(column => {
        if (column.palette &amp;&amp; column.palette != 'none') {
            column.paletteName = column.palette;
            let name = palettes[column.palette];
            if (name === undefined) { // fallback
                name = column.palette;
            }
            let colors;
            let colorNames;
            if (defaultPalettes.numerical[name]) {
                colors = defaultPalettes.numerical[name];
            } else if (defaultPalettes.categorical[name]) {
                colors = defaultPalettes.categorical[name];
            } else if (Array.isArray(name)) {
                const item = name[0];
                if (typeof item === 'string' || item instanceof String) {
                    colors = name;
                } else {
                    throw `Palette definition ${name} is not recognized. Expected are: array of colors, array of color-name pairs.`;
                }
            } else if (Array.isArray(name.colors) &amp;&amp; Array.isArray(name.names)) {
                colors = name.colors;
                colorNames = name.names;
            } else {
                const names = [
                    ...Object.getOwnPropertyNames(defaultPalettes.numerical),
                    ...Object.getOwnPropertyNames(defaultPalettes.categorical)
                ];
                throw `Palette ${name} not defined. Use one of ${names.join(', ')}.`;
            }

            if (column.numeric) {
                let scale = column.scale;
                if (column.colorScale) {
                    scale = column.colorScale;
                }
                const [min, max] = scale.domain();
                const step = (max - min) / (colors.length - 1);
                const domain = [...d3.range(min, max, step), max];
                column.palette = d3.scaleLinear().domain(domain).range(colors);
            }
            // TODO: replace with categorical
            if (column.geom === 'pie' || column.geom === 'text') {
                let domain = colorNames;
                if (domain === undefined) {
                    domain = d3.range(colors.length);
                }
                column.palette = d3.scaleOrdinal().domain(domain).range(colors);
                column.palette.colors = colors;
                column.palette.colorNames = colorNames;
            }
        }
    });
};
</code></pre>
        </article>
    </section>




            </div>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

<script src="scripts/search.js"> </script>


</body>
</html>
